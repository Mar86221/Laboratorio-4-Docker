<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>in</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1><a name="_an3iuyhamuij"></a><strong>Universidad Centroamericana José
Simeón Cañas</strong></h1>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.001.png" /></p>
<h1></h1>
<h1><a name="_ynzxo6dwj93y"></a><a name="_3npbchbhyyco"></a><strong>Ciclo
01/2024, Laboratorio: Entornos de desarrollo web con
Docker.</strong></h1>
<h3><a name="_222lste8cqqv"></a><strong>Catedrática: Elisa
Aldana</strong></h3>
<h3><a name="_87cf60580t2d"></a><strong>2024, Antiguo
Cuscatlan</strong></h3>
<h2><a name="_f9gbxv73pqyj"></a>¿Qué es Docker?</h2>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.002.png" /></p>
<p>Docker es una plataforma de software que permite crear, probar e
implementar aplicaciones rápidamente. Docker empaqueta software en
unidades estandarizadas llamadas contenedores que incluyen todo lo
necesario para que el software se ejecute, incluidas bibliotecas,
herramientas de sistema, código y tiempo de ejecución. Con Docker, puede
implementar y ajustar la escala de aplicaciones rápidamente en cualquier
entorno con la certeza de saber que su código se ejecutará.</p>
<h2><a name="_1oo0ntz3mlw1"></a><strong>Conceptos básicos</strong></h2>
<p><strong>Imágenes</strong> Una imagen es una especie de plantilla, una
captura del estado de un contenedor. Se podría decir que una imagen de
un contenedor es como un snapshot de una máquina virtual, pero mucho
mucho más ligero. Por ejemplo una imagen podría contener un sistema
operativo Ubuntu con un servidor Apache y tu aplicación web instalada.
Las imágenes se utilizan para crear contenedores, y nunca cambian.</p>
<p><strong>DockerFile</strong> Es un archivo de configuración que se
utiliza para crear imágenes. En dicho archivo se indica qué es lo que
queremos que tenga la imagen, y los distintos comandos para instalar las
herramientas.</p>
<p><strong>Containers</strong> Un contenedor de Docker es una instancia
en ejecución de una imagen de Docker. Sin embargo, a diferencia de la
virtualización tradicional con un hipervisor de tipo 1 o tipo 2, un
contenedor de Docker se ejecuta en el núcleo del sistema operativo
host.</p>
<p><strong>Volúmenes</strong> No es una buena práctica guardar los datos
persistentes dentro de un contenedor de Docker. Para eso están los
volúmenes, fuera de los contenedores. Así se puede crear y borrar
contenedores sin preocuparse por que se borren los datos. Además los
volúmenes se utilizan para compartir datos entre contenedores.</p>
<p><strong>Links</strong> Sirven para enlazar contenedores entre sí, que
están dentro de una misma máquina, sin exponer a los contenedores cuáles
son los datos de la máquina que los contiene.</p>
<h2><a name="_d5vd88qpsmlu"></a><strong>¿Para qué nos sirve
Docker?</strong></h2>
<p><strong>Desarrollo y pruebas de aplicaciones:</strong> Docker
proporciona entornos de desarrollo consistentes y reproducibles,
simplificando el proceso de desarrollo y prueba de aplicaciones.</p>
<p><strong>Despliegue de aplicaciones:</strong> Docker facilita el
despliegue rápido y eficiente de aplicaciones en diferentes entornos,
desde servidores locales hasta la nube.</p>
<p><strong>Microservicios y arquitecturas distribuidas:</strong> Docker
es popular para empaquetar servicios como contenedores independientes,
lo que simplifica la gestión y escalabilidad de sistemas distribuidos,
especialmente cuando se combina con herramientas de orquestación como
Kubernetes.</p>
<h2><a name="_g3mkk6l6a75m"></a><strong>Comandos básicos de
Docker</strong></h2>
<p>|Comando|Definición| | :- | :- | |<strong>sudo docker ps -
a</strong>|Este comando se utiliza para ver todos los contenedores en
ejecución actualmente.| |<strong>sudo docker images</strong>|Este
comando se utiliza para ver todas las imágenes de Docker disponibles en
el sistema.| |<strong>sudo docker rm</strong>|Este comando se utiliza
para eliminar un contenedor que ya no se necesita. Por ejemplo, docker
rm my_container eliminará el contenedor llamado “my_container”.|
|<strong>sudo docker build</strong>|<p>Este comando se utiliza para
construir una imagen personalizada a partir de un archivo
Dockerfile..</p><p></p>| |<strong>sudo docker exec</strong>|Este comando
se utiliza para ejecutar un comando dentro de un contenedor en
ejecución. Por ejemplo, docker exec my_container ls -l ejecutará el
comando “ls -l” dentro del contenedor llamado “my_container”.|
|<strong>sudo docker-compose</strong>|Este comando se utiliza para
orquestar múltiples contenedores y sus dependencias en un entorno de
aplicación más grande.| |<strong>sudo docker logs</strong>|Este comando
se utiliza para ver los registros de un contenedor. Puede ver los
registros de un contenedor específico utilizando su ID o su nombre.|</p>
<h1></h1>
<h1></h1>
<h1><a name="_kw00toz0xrfl"></a><a name="_k05p44uzmi66"></a><a name="_4nme9m9fgsdh"></a><strong>Creación
de la máquina virtual</strong></h1>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.003.png" /></p>
<p>Empezaremos creando una máquina virtual usando VMware (programa que
te permite crear y usar varias computadoras virtuales en una sola
computadora real)</p>
<p>Abrimos VMware y creamos una nueva máquina virtual</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.004.png" /></p>
<p>click en instaler disk image iso, y en browser buscamos nuestra
imagen iso, alojada en el escritorio (En nuestro caso será la de ubuntu
server)</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.005.png" /></p>
<p>pondremos “uca” como nombre y usuario y “12345” como contraseña</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.006.png" /></p>
<p>dejamos el nombre por defecto</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.007.png" /></p>
<p>tamaño por defecto(20GB)</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.008.png" /></p>
<p>una vez configurado todo deberíamos tener una información de nuestra
MV asi</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.009.png" /></p>
<p>Al dar “Finish” se iniciara la imagen de Ubuntu Server y comenzará la
instalación de esta en nuestra “Computadora virtual”</p>
<h3></h3>
<h3></h3>
<h3><a name="_hsphortsz2q9"></a><a name="_mkaku9z2xses"></a><a name="_y42j87fb2lv7"></a><strong>Configuración
de la máquina virtual</strong></h3>
<p>Seleccionamos el idioma inglés</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.010.png" /></p>
<p>daremos click en “Continue without updating” (esto es así por
cuestiones de tiempo)</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.011.png" /></p>
<p>click en “Done”, dejaremos el teclado en ingles</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.012.png" /></p>
<p>anotamos la ip que se asigna en nuestra instalación, luego de eso
continuaremos dando click en “Done”</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.013.png" /></p>
<p>dejamos en blanco el proxy address</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.014.png" /></p>
<p>cambiamos SV por CO, esto debido a que utilizaremos el servidor de
colombia</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.015.png" /></p>
<p>nos aseguramos que esten marcadas estas opciones</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.016.png" /></p>
<p>luego le daremos click en “Done”</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.017.png" /></p>
<p>click en “Continue”</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.018.png" /></p>
<p>Para efectos prácticos, llenaremos este formulario con los siguientes
datos</p>
<p>Name: uca</p>
<p>server name: uca</p>
<p>username: uca</p>
<p>password: 12345</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.019.png" /></p>
<p>instalaremos OpenSSH (Secure Shell, que proporciona una forma segura
de acceder a sistemas remotos y transferir datos de forma cifrada sobre
una red). Este lo utilizaremos cuando ya haya finalizado la
instalación.</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.020.png" /></p>
<p>marcamos únicamente la opción de docker, con un espacio Otra forma de
hacerlo es no marcando la opcion y siguiendo una instalación limpia
desde documentacion como:
https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.021.png" /></p>
<p>comienza la actualización, esto tomará unos minutos,esperaremos hasta
que nos dé la opcion de “Reboot Now”</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.022.png" /></p>
<p>si al iniciar la máquina muestra este error, solo debemos de dar
enter y acceder con nuestras credenciales</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.023.png" /></p>
<h1><a name="_d3f1bny3to59"></a><strong>Uso de SSH</strong></h1>
<p>Antes de continuar con la instalación de Docker usaremos la cmd de
windows para mayor practicidad, para eso anotamos previamente la
dirección IP</p>
<p>abrimos cmd y escribimos lo siguiente ssh
<nombre de usuario>@<direccion IP></p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.024.png" /></p>
<p>ahora ya estamos listos para continuar</p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.025.png" /></p>
<h1><a name="_6pc8vy3nzmkz"></a><strong>Instalación de
Docker</strong></h1>
<h3><a name="_s0zjaze7dl9g"></a><strong>Actualizar base de datos de
paquetes</strong></h3>
<pre><code>sudo apt update</code></pre>
<p>A continuación, instale algunos paquetes de requisitos previos que
permitan a apt usar paquetes a través de HTTPS:</p>
<pre><code>sudo apt install apt-transport-https ca-certificates curl software-properties-common</code></pre>
<p>Luego, añada la clave de GPG para el repositorio oficial de Docker en
su sistema:</p>
<pre><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre>
<p>Agregue el repositorio de Docker a las fuentes de APT:</p>
<pre><code>sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable&quot;</code></pre>
<p>A continuación, actualice el paquete de base de datos con los
paquetes de Docker del repositorio recién agregado:</p>
<pre><code>sudo apt update</code></pre>
<p>Asegúrese de estar a punto de realizar la instalación desde el
repositorio de Docker en lugar del repositorio predeterminado de
Ubuntu:</p>
<pre><code>apt-cache policy docker-ce</code></pre>
<pre><code>sudo apt install docker-ce</code></pre>
<p>Con esto, Docker quedará instalado, compruebe que funcione:</p>
<pre><code>sudo systemctl status docker</code></pre>
<h1></h1>
<h3><a name="_4u66lkwllsqv"></a><strong>Instalar Docker
Compose</strong></h3>
<p>El siguiente comando descargará la 1.29.2 versión y guardará el
archivo ejecutable en /usr/local/bin/docker-compose, lo que hará que
este software sea accesible globalmente como docker-compose:</p>
<pre><code>sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</code></pre>
<p>A continuación, establezca los permisos correctos para que el comando
docker-compose sea ejecutable:</p>
<pre><code>sudo chmod +x /usr/local/bin/docker-compose</code></pre>
<p>Para verificar que la instalación fue exitosa, puede ejecutar:</p>
<pre><code>docker-compose --version</code></pre>
<h1></h1>
<h3><a name="_j2nuu2p44hdt"></a><strong>Reiniciar la
máquina</strong></h3>
<p>Para que algunos de los servicios que acabamos de instalar funcionen
correctamente, debemos reiniciar nuestra máquina virtual, luego de este
paso, deberemos iniciar sesión denuevo en nuestra máquina virtual eso
hará que se cierre la sesión en nuestra cmd, entonces iniciaremos sesión
el VMware y luego restableceremos la conexión ssh</p>
<pre><code>sudo reboot now</code></pre>
<h3><a name="_skgi2287t9cr"></a><strong>Verificar la versión de
Docker</strong></h3>
<pre><code>docker version</code></pre>
<h1></h1>
<h1></h1>
<h1><a name="_qar28tjq455i"></a><strong>Creación de una web-demo en
Docker</strong></h1>
<p>creamos un directorio</p>
<pre><code>mkdir docker-web-demo

cd docker-web-demo</code></pre>
<p>luego crearemos un archivo index.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;Docker Web Demo&lt;/title&gt;
    &lt;/head&gt;

    &lt;body&gt;
      &lt;h1&gt;Insertar aqui&lt;/h1&gt;
      &lt;div&gt;
        &lt;label for=&quot;input-text&quot;&gt;Nombre:&lt;/label&gt;
        &lt;input type=&quot;text&quot; id=&quot;input-text&quot; /&gt;
        &lt;button id=&quot;add-button&quot;&gt;Agregar&lt;/button&gt;
      &lt;/div&gt;

      &lt;div id=&quot;notifications&quot;&gt;&lt;/div&gt;

      &lt;script&gt;
        const inputText = document.getElementById(&#39;input-text&#39;);
        const addButton = document.getElementById(&#39;add-button&#39;);
        const notificationsDiv = document.getElementById(&#39;notifications&#39;);

        addButton.addEventListener(&#39;click&#39;, () =&gt; {
          const newText = document.createTextNode(inputText.value);
          const newNotification = document.createElement(&#39;p&#39;);
          newNotification.appendChild(newText);
          notificationsDiv.appendChild(newNotification);
          inputText.value = &#39;&#39;; // Limpiar el campo de texto
        });
      &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>ahora crearemos un Dockerfile en el mismo directorio que index.html,
es este se encontrará las instrucciones necesarias para construir una
imagen de Docker</p>
<pre><code>\# Usamos una versión de Node.js

FROM node:14

\# Seteamos el directorio donde trabajara /app

WORKDIR /app

\# Copiamos el contenido del directorio en /app

COPY . /app

\# Instalar los paquetes de package.json

RUN npm install

\# Abrimos el acceso del puerto 80

EXPOSE 80

\# Ejecutamos la app cuando se levante el contenedor

CMD [&quot;npm&quot;, &quot;start&quot;]</code></pre>
<p>de igual manera crearemos un archivo package.json. Este se encargará
de contener todas las dependencias y scripts necesarios para nuestra
web-demo</p>
<pre><code>{
    &quot;name&quot;: &quot;docker-web-demo&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;description&quot;: &quot;web page demo for Docker&quot;,
    &quot;main&quot;: &quot;index.html&quot;,
    &quot;scripts&quot;: {
      &quot;start&quot;: &quot;npx serve -s -l 80&quot;
    },

    &quot;dependencies&quot;: {
      &quot;serve&quot;: &quot;^13.0.2&quot;
    }
}</code></pre>
<p>construiremos la imagen de Docker y levantaremos el contenedor
(insertar primero uno y luego el otro). Una pagina que puede ser util
cuando hablamos de contenedores puede ser: https://hub.docker.com/</p>
<pre><code>sudo docker build -t docker-web-demo .</code></pre>
<pre><code>sudo docker run -d -p 80:80 docker-web-demo</code></pre>
<p>Una vez hecho todos esto pasos deberíamos ser capaces de acceder a
nuestra página web, en ciertas condiciones podemos acceder a este en el
navegador web con <code>https://localhost</code> , sin embargo en estos
casos que es una máquina virtual sin interfaz gráfica deberemos acceder
con <code>https://&lt;ip_de_la_maquina_virtual&gt;</code></p>
<p><img
src="Aspose.Words.c119beab-694f-499c-a7d1-ba9bb8873aec.026.png" /></p>
</body>
</html>
